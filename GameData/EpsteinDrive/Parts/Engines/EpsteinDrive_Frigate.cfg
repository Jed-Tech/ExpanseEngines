// GameData/EpsteinDrive/Parts/Engines/EpsteinDrive_Frigate.cfg
// Option A (legacy fx_* + sound_* only). No custom EFFECTS{}.

PART
{
	name = EpsteinDrive_Frigate
	module = Part
	author = Jed-Tech

	MODEL
	{
		model = EpsteinDrive/Assets/EpsteinDriveV4
	}
	rescaleFactor = 1.0

	attachRules = 1,1,1,1,0
	bulkheadProfiles = size3

	node_stack_top    = 0,  1.875, 0, 0,  1, 0, 3
	node_stack_bottom = 0, -1.875, 0, 0, -1, 0, 3

	// FX + sounds (borrowed style)
	fx_exhaustFlame_blue      = 0.0, -2.2, 0.0, 0.0, 1.0, 0.0, running
	fx_exhaustLight_blue      = 0.0, -2.2, 0.0, 0.0, 0.0, 1.0, running
	fx_smokeTrail_light       = 0.0, -2.2, 0.0, 0.0, 1.0, 0.0, running
	fx_exhaustSparks_flameout  = 0.0, -2.2, 0.0, 0.0, 1.0, 0.0, flameout

	sound_vent_medium = engage
	sound_rocket_hard = running
	sound_vent_soft   = disengage
	sound_explosion_low = flameout

	// Editor
	category = Engine
	subcategory = 0
	TechRequired = nuclearPropulsion
	entryCost = 12000000
	cost = 6000000

	title = #LOC_EpsteinDrive_part_Frigate_title
	manufacturer = #LOC_EpsteinDrive_manufacturer
	description = #LOC_EpsteinDrive_part_Frigate_desc
	tags = epstein expanse torch fusion water atmosphere

	// Physical
	mass = 5.0
	crashTolerance = 20
	maxTemp = 2000
	emissiveConstant = 0.8

	// Drag
	dragModelType = default
	maximum_drag = 0.2
	minimum_drag = 0.2
	angularDrag = 2

	// Power: passive + alternator
	MODULE
	{
		name = ModuleGenerator
		isAlwaysActive = true
		OUTPUT_RESOURCE
		{
			name = ElectricCharge
			rate = 100
		}
	}
	MODULE
	{
		name = ModuleAlternator
		RESOURCE
		{
			name = ElectricCharge
			rate = 1000
		}
	}

	// Mode switching
	MODULE
	{
		name = MultiModeEngine
		primaryEngineID = Cruise
		primaryEngineModeDisplayName = #LOC_EpsteinDrive_mode_Cruise
		secondaryEngineID = AtmoEjection
		secondaryEngineModeDisplayName = #LOC_EpsteinDrive_mode_AtmoEjection
	}

	// Cruise
	MODULE
	{
		name = ModuleEnginesFX
		engineID = Cruise
		thrustVectorTransformName = thrustTransform
		EngineType = LiquidFuel

		minThrust = 0
		maxThrust = 30000
		heatProduction = 200

		PROPELLANT
		{
			name = LiquidFuel
			ratio = 0.9
			DrawGauge = true
		}
		PROPELLANT
		{
			name = Oxidizer
			ratio = 1.1
		}

		atmosphereCurve
		{
			key = 0  500000
			key = 1  2000
		}
	}

	// Atmospheric Water Ejection
	MODULE
	{
		name = ModuleEnginesFX
		engineID = AtmoEjection
		thrustVectorTransformName = thrustTransform
		EngineType = LiquidFuel

		minThrust = 0
		maxThrust = 30000
		heatProduction = 120

		PROPELLANT
		{
			name = LiquidFuel
			ratio = 0.9
			DrawGauge = true
		}
		PROPELLANT
		{
			name = Oxidizer
			ratio = 1.1
		}

		atmosphereCurve
		{
			key = 0  12000
			key = 1  10000
		}
	}

	// Surface dust (driven by AtmoEjection engine module index)
	MODULE
	{
		name = ModuleSurfaceFX
		thrustProviderModuleIndex = 1
		fxMax = 1
		maxDistance = 120
		falloff = 2
		thrustTransformName = thrustTransform
	}

	// Gimbal (optional)
	MODULE
	{
		name = ModuleGimbal
		gimbalTransformName = thrustTransform
		gimbalRange = 2
	}
}
