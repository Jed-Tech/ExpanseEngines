// GameData/EpsteinDrive/Parts/Engines/EpsteinDrive_Cruiser.cfg
// Two modes: Cruise + Overburn. Legacy fx_* + sound_* only.

PART
{
	name = EpsteinDrive_Cruiser
	module = Part
	author = Jed-Tech

	MODEL
	{
		model = EpsteinDrive/Assets/BussardFusion
	}
	rescaleFactor = 1.0

	attachRules = 1,1,1,1,0
	bulkheadProfiles = size5

	node_stack_top    = 0,  3.75, 0, 0,  1, 0, 5
	node_stack_bottom = 0, -3.75, 0, 0, -1, 0, 5

	// FX + sounds (borrowed style)
	fx_exhaustFlame_blue      = 0.0, -2.2, 0.0, 0.0, 1.0, 0.0, running
	fx_exhaustLight_blue      = 0.0, -2.2, 0.0, 0.0, 0.0, 1.0, running
	fx_smokeTrail_light       = 0.0, -2.2, 0.0, 0.0, 1.0, 0.0, running
	fx_exhaustSparks_flameout  = 0.0, -2.2, 0.0, 0.0, 1.0, 0.0, flameout

	sound_vent_medium = engage
	sound_rocket_hard = running
	sound_vent_soft   = disengage
	sound_explosion_low = flameout

	// Editor
	category = Engine
	subcategory = 0
	TechRequired = nuclearPropulsion
	entryCost = 12000000
	cost = 6000000

	title = #LOC_EpsteinDrive_part_Cruiser_title
	manufacturer = #LOC_EpsteinDrive_manufacturer
	description = #LOC_EpsteinDrive_part_Cruiser_desc
	tags = epstein expanse torch fusion water overburn

	// Physical
	mass = 10.0
	crashTolerance = 20
	maxTemp = 2000
	emissiveConstant = 0.8

	// Drag
	dragModelType = default
	maximum_drag = 0.2
	minimum_drag = 0.2
	angularDrag = 2

	// Power: passive + alternator
	MODULE
	{
		name = ModuleGenerator
		isAlwaysActive = true
		OUTPUT_RESOURCE
		{
			name = ElectricCharge
			rate = 100
		}
	}
	MODULE
	{
		name = ModuleAlternator
		RESOURCE
		{
			name = ElectricCharge
			rate = 1000
		}
	}

	// Mode switching
	MODULE
	{
		name = MultiModeEngine
		primaryEngineID = Cruise
		primaryEngineModeDisplayName = #LOC_EpsteinDrive_mode_Cruise
		secondaryEngineID = Overburn
		secondaryEngineModeDisplayName = #LOC_EpsteinDrive_mode_Overburn
	}

	// Cruise
	MODULE
	{
		name = ModuleEnginesFX
		engineID = Cruise
		thrustVectorTransformName = thrustTransform
		EngineType = LiquidFuel

		minThrust = 0
		maxThrust = 60000
		heatProduction = 250

		PROPELLANT { name = Water         ratio = 1000  DrawGauge = true }
		PROPELLANT { name = FusionPellets ratio = 1 }

		atmosphereCurve
		{
			key = 0  550000
			key = 1  2000
		}
	}

	// Overburn (same ratio, higher consumption via thrust, lower Isp, higher heat)
	MODULE
	{
		name = ModuleEnginesFX
		engineID = Overburn
		thrustVectorTransformName = thrustTransform
		EngineType = LiquidFuel

		minThrust = 0
		maxThrust = 84000
		heatProduction = 450

		PROPELLANT { name = Water         ratio = 1000  DrawGauge = true }
		PROPELLANT { name = FusionPellets ratio = 1 }

		atmosphereCurve
		{
			key = 0  420000
			key = 1  1800
		}
	}

	// Gimbal (optional)
	MODULE
	{
		name = ModuleGimbal
		gimbalTransformName = thrustTransform
		gimbalRange = 2
	}
}
